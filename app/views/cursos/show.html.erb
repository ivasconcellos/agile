<div class="card">
  <div class="card-header"><%= @curso.nome %></div>

  <% if can? :new, Conteudo %>
    <div class="text-center">
      <br>
      <%= link_to 'Cadastrar Módulo do Curso', {controller: 'conteudos', action: 'new', curso_id: @current_usuario.curso_atual_id}, class: "btn btn-md btn-primary" %>
    </div>
  <% end %>
  <div id="accordion">
    <% @modulos.each_with_index do |modulo, index| %>
    <div class="card">
      <div class="card-header" id="heading<%= index.to_s %>">
        <h5 class="mb-0">
          <button class="btn btn-link modulo" data-toggle="collapse" data-target="#collapse<%= index.to_s %>" aria-expanded="false" aria-controls="collapse<%= index.to_s %>">
            Módulo: <%= modulo.nome %> 
          </button>
          <% if can? :edit, Conteudo %>
              <td><%= link_to '', edit_conteudo_path(modulo), class: "fa fa-edit" %></td>
            <% end %>
            <% if can? :destroy, Conteudo %>
              <td><%= link_to '', modulo, method: :delete, data: { confirm: 'Deseja realmente excluir o Conteúdo?' }, class: "fa fa-trash" %></td>
            <% end %>
        </h5>
      </div>

      <div id="collapse<%= index.to_s %>" class="collapse" aria-labelledby="heading<%= index.to_s %>" data-parent="#accordion">
        <div class="card-body">
          <% if modulo.descricao? %>
          <b> Descrição:</b> <%= modulo.descricao %>
          <% end %>
          <ul>
            <% @materiais.where(conteudo_id: modulo.id).each do |material| %>
              <li><%= material.nome %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
    <% end %>
  </div>
</div>