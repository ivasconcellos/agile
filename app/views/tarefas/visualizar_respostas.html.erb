<div class="card">

  <div class="card-header"><%= @tarefa.nome %></div>

  <div class="table-responsive">

    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th class="text-center">Aluno</th>
          <th class="text-center">Arquivo</th>
          <th class="text-center">Nota máxima</th>
          <th class="text-center">Nota do aluno</th>
          <th class="text-center" colspan="2">Opções</th>
        </tr>
      </thead>
      <tbody>
        <% @tarefas_alunos.each do |tarefa_aluno| %>
          <tr>
            <td><%= tarefa_aluno.usuario_curso.nickname %></td>
            <td><%= link_to "Arquivo", tarefa_aluno.arquivo.url, target: 'blank' %></td>
            <td><%= tarefa_aluno.tarefa.pontuacao %></td>
            <% if tarefa_aluno.avaliacao_tarefa %>
              <td><%= tarefa_aluno.avaliacao_tarefa.nota %></td>
            <% else %>
              <td>-</td>
            <% end %>
            <% if can? :show, TarefaAluno %>
              <td><%= link_to 'Visualizar', tarefa_aluno %></td>
            <% end %>   
            <td><%= link_to 'Avaliar Tarefa', {controller: 'avaliacao_tarefa', action: 'new', tarefa_aluno_id: tarefa_aluno.id}, class: "btn btn-sm btn-danger" %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <span> <%= will_paginate @tarefas_alunos %></span>

</div>
